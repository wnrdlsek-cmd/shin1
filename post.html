<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>익명</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { background:#0b1220; color:#e6edf3; font-family:Arial; }
  .container { max-width:800px; margin:auto; padding:20px; }
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAqjmjuHR9c9LU3fw-opriDk4TA2sdw-N8",
  authDomain: "shin1-35930.firebaseapp.com",
  projectId: "shin1-35930",
  storageBucket: "shin1-35930.firebasestorage.app",
  messagingSenderId: "341705553561",
  appId: "1:341705553561:web:b071abdf4b15e966eb2a08",
  measurementId: "G-86NJYXDMC4"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
</script>
</head>

<body>
<div class="container">
  <div id="post">불러오는 중...</div>
</div>

<script type="module">
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

const db = window.__fb?.db;
const id = new URLSearchParams(location.search).get("id");
const el = document.getElementById("post");

(async()=>{
  const snap = await getDoc(doc(db,"posts",id));
  if(!snap.exists()) return el.textContent = "글이 없습니다.";

  const d = snap.data();
  el.innerHTML = `
    <p class="text-sm text-gray-400 mb-2">익명</p>
    <div class="whitespace-pre-wrap">${d.content}</div>
    ${d.imageUrl ? `<img src="${d.imageUrl}" class="max-w-full mt-3 rounded">` : ""}
  `;
})();
</script>
</body>
</html>
